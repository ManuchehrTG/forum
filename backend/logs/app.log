2026-01-17 22:40:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 22:40:10 - root - INFO - [main.py:23] - docs_url: True
2026-01-17 22:50:18 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-17 22:59:29 - root - INFO - [main.py:30] - üî¥ Shutting down...
2026-01-17 22:59:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:00:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:02:32 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-17 23:02:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:02:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:04:56 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-17 23:05:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:05:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:07:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:07:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-17 23:07:36 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-17 23:07:36 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-17 23:09:13 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/p5LYniQ8D6udTXmUYZaLeERObu2GAVQrbADiWvIq_EQ.svg "HTTP/1.1 302 Found"
2026-01-17 23:09:14 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://cdn4.telesco.pe/file/C2Wd-LNV_SVFwntlUU93b5DjK8tikiCg0CXs_li55vSTjTjYcics2AbDuOqeK2Gay5t2uWC9OswNqajx5EA3aQYryjXvBDzJQ738KU0OcWzBIM2QjDpMZtEDS02YOLo759FjsGOCS-9rKhOi_05OcUwSTVU8ukGclI71SdG9aO-yCIZXitdqceFOJIqabj0Y1OP2BVzr7uIV6lODyCoY__PB3mk874YmY__LCuSiFI9QyLuEIs_4aj-c5kYjRgu_M7sTLqkAYFKGwqa1mdS5swXvmC6qoLCvDynioBnzNMeNyu7ZtO8ixom-UgZX9qDHaeI3HNF7ZAsxkNjlmj96Lg.jpg "HTTP/1.1 200 OK"
2026-01-17 23:09:14 - asyncio - ERROR - [base_events.py:1785] - Task exception was never retrieved
future: <Task finished name='Task-37' coro=<UpdateUserAvatarUseCase.execute() done, defined at /app/src/application/users/use_cases/update_avatar.py:18> exception=InterfaceError('cannot call Connection.execute(): connection has been released back to the pool')>
Traceback (most recent call last):
  File "/app/src/application/users/use_cases/update_avatar.py", line 27, in execute
    await self.user_repo.set_avatar(command.user_id, str(path))
  File "/app/src/infrastructure/database/repositories/raw_sql/users.py", line 59, in set_avatar
    await self.connection.execute(
          ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/pool.py", line 64, in call_con_method
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Connection.execute(): connection has been released back to the pool
2026-01-18 00:22:06 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 00:22:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 00:22:26 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-18 00:22:26 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/p5LYniQ8D6udTXmUYZaLeERObu2GAVQrbADiWvIq_EQ.svg "HTTP/1.1 302 Found"
2026-01-18 00:22:27 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://cdn4.telesco.pe/file/C2Wd-LNV_SVFwntlUU93b5DjK8tikiCg0CXs_li55vSTjTjYcics2AbDuOqeK2Gay5t2uWC9OswNqajx5EA3aQYryjXvBDzJQ738KU0OcWzBIM2QjDpMZtEDS02YOLo759FjsGOCS-9rKhOi_05OcUwSTVU8ukGclI71SdG9aO-yCIZXitdqceFOJIqabj0Y1OP2BVzr7uIV6lODyCoY__PB3mk874YmY__LCuSiFI9QyLuEIs_4aj-c5kYjRgu_M7sTLqkAYFKGwqa1mdS5swXvmC6qoLCvDynioBnzNMeNyu7ZtO8ixom-UgZX9qDHaeI3HNF7ZAsxkNjlmj96Lg.jpg "HTTP/1.1 200 OK"
2026-01-18 21:14:49 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:14:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:15:36 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:15:38 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:16:31 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:16:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:17:58 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:18:00 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:18:34 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:18:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:19:58 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:20:00 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:22:55 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-18 21:22:55 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-18 21:24:54 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-18 21:24:57 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-18 21:24:59 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-18 21:25:44 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-18 21:25:52 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/users/endpoints.py", line 15, in get_current_user_info_endpoint
    return schemas.UserResponse.from_orm(current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 1475, in from_orm
    return cls.model_validate(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/model_attributes_type
2026-01-18 21:33:18 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:33:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:33:22 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-18 21:33:22 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/users/dependencies.py", line 88, in get_current_user
    raise NotFoundApiError(
src.shared.exceptions.api.NotFoundApiError: User with id '14d0604e-6cda-49c2-87c9-25255354234a' not found | {'entity': 'User', 'entity_id': UUID('14d0604e-6cda-49c2-87c9-25255354234a')}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/exceptions/handlers.py", line 31, in base_app_error_handler
    return JSONResponse(status_code=status_code, content=response_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 46, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 192, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UUID is not JSON serializable
2026-01-18 21:34:13 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:34:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:34:17 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-18 21:34:47 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-18 21:34:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-18 21:34:50 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 00:06:48 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 13:21:42 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 13:21:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:30 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 13:22:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:34 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:35 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:22:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:23:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:23:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:24:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:25:34 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:26:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:27:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:28:38 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:29:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:30:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:31:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:32:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:33:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:34:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:35:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:36:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:37:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:38:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:39:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:40:24 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:41:41 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 13:41:43 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 13:42:39 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 31, in create_theme_endpoint
    theme = await create_theme_use_case.execute(command)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/create.py", line 19, in execute
    sections = await self.section_repo.get_all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 29, in get_all
    return [Section(**row) for row in list_row]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2026-01-19 13:57:05 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 13:57:07 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:57:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 13:57:54 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 13:57:54 - database - INFO - [connection.py:54] - üêò PostgreSQL disconnected
2026-01-19 14:00:35 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 14:00:36 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 14:01:20 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 31, in create_theme_endpoint
    theme = await create_theme_use_case.execute(command)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/create.py", line 28, in execute
    sections = await self.section_repo.get_all()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 29, in get_all
    return [Section(**row) for row in list_row]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 29, in <listcomp>
    return [Section(**row) for row in list_row]
            ^^^^^^^^^^^^^^
TypeError: src.domain.sections.entities.Section() argument after ** must be a mapping, not str
2026-01-19 14:04:24 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 14:04:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 14:04:27 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 14:04:27 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 31, in create_theme_endpoint
    theme = await create_theme_use_case.execute(command)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/create.py", line 34, in execute
    await self.theme_repo.add(theme)
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 30, in add
    await connection.execute(
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 357, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedTableError: relation "theme_section" does not exist
2026-01-19 14:06:18 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 14:06:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 14:06:39 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 14:34:20 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 14:34:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:39 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 15:31:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:31:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:32:07 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:32:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:36:33 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 15:36:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:39:59 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:40:30 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:41:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:42:37 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 15:43:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:45:42 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 15:45:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:46:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:46:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:47:24 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:47:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:47:47 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 15:58:35 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 15:58:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:59:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 15:59:41 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 16:00:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 16:00:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 16:00:52 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 16:00:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 16:01:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 16:01:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 16:21:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 16:21:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 16:22:03 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 16:22:04 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 16:22:04 - database - INFO - [connection.py:54] - üêò PostgreSQL disconnected
2026-01-19 16:23:21 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 16:23:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 17:09:05 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 17:09:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 17:39:39 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 17:39:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 17:40:13 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 17:40:14 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 17:40:29 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 28, in get_root_theme
    return await theme_service.get_root()
                 ^^^^^^^^^^^^^
NameError: name 'theme_service' is not defined
2026-01-19 18:05:13 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 18:05:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:05:18 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 18:05:19 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 18:05:31 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 39, in get_root_theme_endpoint
    return schemas.ThemeResponse.from_orm(theme)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 1475, in from_orm
    return cls.model_validate(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ThemeResponse
author_id
  UUID input should be a string, bytes or UUID object [type=uuid_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/uuid_type
2026-01-19 18:06:30 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 18:06:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:06:41 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 18:07:11 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 41, in get_theme
    return await theme_use_case.get_by_id(theme_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'GetThemeUseCase' object has no attribute 'get_by_id'
2026-01-19 18:24:38 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 18:24:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:24:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:25:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:25:13 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:26:19 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 18:26:20 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-19 18:26:57 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 10 validation errors:
  {'type': 'string_type', 'loc': ('response', 0), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('303d9d91-5e42-4492-8071-210f03646bc6'), code='discussion', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 1), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('3d78f8d4-e5ff-4998-b6f7-77f9cd254bd5'), code='experience_exchange', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 2), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('f5fc76f5-8ed6-416a-ac11-d742f10cba86'), code='description', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 3), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('ced325ee-bf90-49c3-af18-c79a46cddb80'), code='perfect_result', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 4), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('c22b2e7b-ea1d-47e9-bb81-1af0f52739fe'), code='project_modules', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 5), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('8b71c72b-60d1-41ff-a702-0e7a68189b90'), code='chat_ideas', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 6), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('fe5d7e1e-fd84-4c4c-a4a5-d32d7d4c6b04'), code='chat_qa', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 7), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('48749304-f321-4b13-9284-331a1fa3aa6d'), code='chat_publications', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 8), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('499b8339-85a8-4820-b7ef-8351791376b5'), code='chat_tasks', is_visible=True)}
  {'type': 'string_type', 'loc': ('response', 9), 'msg': 'Input should be a valid string', 'input': ThemeSectionDTO(id=UUID('40e34dc4-c0ef-4ea2-a868-18b6cd90d71b'), code='chat_experiments', is_visible=True)}

  File "/app/src/api/v1/themes/endpoints.py", line 48, in get_theme_section_codes_endpoint
    GET /api/v1/themes/{theme_id}/sections
2026-01-19 18:29:13 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 18:29:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:29:17 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 18:41:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-01-19 18:41:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-01-19 18:42:02 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-01-19 18:42:03 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-01-21 12:48:42 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-03 16:31:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:38 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 00:34:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:34:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:35:02 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:35:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:35:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:37:07 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 00:37:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:38:16 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 00:38:16 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 251, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 153, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got AuthProviderType

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/auth/endpoints.py", line 17, in telegram_login_endpoint
    result = await auth_by_telegram.execute(command=command)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/auth/use_cases/by_telegram.py", line 27, in execute
    user = await self.user_repo.get_by_provider_user_id(provider, str(tg_user.id))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/users.py", line 26, in get_by_provider_user_id
    user_row = await connection.fetchrow(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 752, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2033, in _do_execute
    result = await executor(stmt, None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 184, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $2: <AuthProviderType.TELEGRAM: 'telegram'> (expected str, got AuthProviderType)
2026-02-04 00:42:06 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 00:42:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 00:42:16 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 00:42:17 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:22:04 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:26:11 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 02:26:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 02:26:18 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 02:31:52 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 02:31:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 02:32:51 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 02:35:38 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:36:09 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 02:36:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 02:36:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 02:36:21 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:36:30 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:36:34 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:36:38 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 02:36:41 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 04:01:25 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 04:01:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 04:01:53 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 04:01:54 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 04:02:47 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 55, in get_theme
    return await get_theme.execute(command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get.py", line 13, in execute
    return self._to_dto(theme)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get.py", line 17, in _to_dto
    id=theme.id,
       ^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
2026-02-04 04:31:27 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 04:31:30 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 04:31:42 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 04:31:43 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 04:36:35 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 47, in get_theme_section_codes_endpoint
    theme_sections = await get_theme_section_codes.execute(command)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_theme_section_codes.py", line 12, in execute
    theme_sections = await self.theme_repo.get_theme_sections(theme_id=command.theme_id)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 72, in get_theme_sections
    return [ThemeSection(theme_id, row["id"], row["code"], row["is_visible"]) for row in rows]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 72, in <listcomp>
    return [ThemeSection(theme_id, row["id"], row["code"], row["is_visible"]) for row in rows]
                                   ~~~^^^^^^
KeyError: 'id'
2026-02-04 04:37:19 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 04:37:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 04:37:28 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 04:37:28 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 47, in get_theme_section_codes_endpoint
    theme_sections = await get_theme_section_codes.execute(command)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_theme_section_codes.py", line 13, in execute
    return [ThemeSectionDTO(section_id=ts.section_id, section_code=ts.section_code, is_visible=ts.is_visible) for ts in theme_sections]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_theme_section_codes.py", line 13, in <listcomp>
    return [ThemeSectionDTO(section_id=ts.section_id, section_code=ts.section_code, is_visible=ts.is_visible) for ts in theme_sections]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for ThemeSectionDTO
section_code
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
is_visible
  Input should be a valid boolean, unable to interpret input [type=bool_parsing, input_value='discussion', input_type=str]
    For further information visit https://errors.pydantic.dev/2.12/v/bool_parsing
2026-02-04 04:45:06 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 04:45:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 04:45:26 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 04:45:26 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 48, in get_theme_section_codes_endpoint
    return [schemas.ThemeSectionResponse.from_orm(ts) for ts in theme_sections]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 48, in <listcomp>
    return [schemas.ThemeSectionResponse.from_orm(ts) for ts in theme_sections]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 1475, in from_orm
    return cls.model_validate(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for ThemeSectionResponse
id
  Field required [type=missing, input_value=ThemeSectionDTO(section_i...ssion', is_visible=True), input_type=ThemeSectionDTO]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
code
  Field required [type=missing, input_value=ThemeSectionDTO(section_i...ssion', is_visible=True), input_type=ThemeSectionDTO]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2026-02-04 04:46:26 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 04:46:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 04:46:33 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 19:58:28 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 19:58:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:18:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:19:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:19:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:24:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:24:27 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:24:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:26:18 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 20:27:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:27:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:27:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:30:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:30:20 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 20:39:11 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 20:39:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:40:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:41:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:41:59 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:42:00 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 20:44:23 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 20:44:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:44:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:44:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:45:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 20:45:23 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:00:01 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:00:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:00:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:00:33 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:00:49 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:00:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:01:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:01:06 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:01:06 - database - INFO - [connection.py:54] - üêò PostgreSQL disconnected
2026-02-04 21:15:16 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:15:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:15:45 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:15:45 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/app/src/application/auth/use_cases/by_telegram.py", line 27, in execute
    user = await self.user_repo.get_by_provider_user_id(provider, str(tg_user.id))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/users.py", line 39, in get_by_provider_user_id
    raise UserNotFoundError.by_provider(provider.value, provider_user_id)
src.domain.users.exceptions.UserNotFoundError: User with provider 'telegram:1894088037' not found | {'entity': 'User', 'entity_id': 'telegram:1894088037'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 251, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 153, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got AuthProviderType

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/auth/endpoints.py", line 16, in telegram_login_endpoint
    result = await auth_by_telegram.execute(command=command)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/auth/use_cases/by_telegram.py", line 44, in execute
    await self.user_repo.add(user)
  File "/app/src/infrastructure/database/repositories/raw_sql/users.py", line 56, in add
    await connection.execute(
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 357, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2033, in _do_execute
    result = await executor(stmt, None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 184, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $2: <AuthProviderType.TELEGRAM: 'telegram'> (expected str, got AuthProviderType)
2026-02-04 21:28:16 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:28:19 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:28:43 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:28:45 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 21:31:02 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 48, in get_root_theme
    return await get_root_theme.execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_root.py", line 10, in execute
    theme = await self.theme_repo.get_root()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 34, in get_root
    return Theme(**row)
           ^^^^^^^^^^^^
TypeError: src.domain.themes.entities.theme.Theme() argument after ** must be a mapping, not NoneType
2026-02-04 21:32:54 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:32:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:33:27 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:33:27 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-04 21:40:31 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:40:34 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:40:37 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-04 21:40:50 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 23, in create_theme_endpoint
    command = CreateThemeCommand(**data.model_dump())
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for CreateThemeCommand
author_id
  Field required [type=missing, input_value={'parent_id': None, 'titl...onTypeAPI.FULL: 'full'>}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2026-02-04 21:42:16 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-04 21:42:18 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-04 21:42:20 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-05 22:35:09 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 22:35:13 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:03 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 22:41:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:18 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:31 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:41:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:46:39 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 22:46:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:48:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 22:59:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:00:21 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 23:00:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:00:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:03:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:04:18 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-05 23:04:18 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-05 23:05:29 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 614, in solve_dependencies
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/sections/dependencies.py", line 30, in get_section_by_id
    return await get_section.execute(command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 17, in execute
    section = await self._get_by_id(query.params["section_id"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 28, in _get_by_id
    return await self.section_repo.get_by_id(section_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 18, in get_by_id
    raise SectionNotFoundError.by_id(section_id)
src.domain.sections.exceptions.SectionNotFoundError: Section with id '3fa85f64-5717-4562-b3fc-2c963f66afa6' not found | {'entity': 'Section', 'entity_id': UUID('3fa85f64-5717-4562-b3fc-2c963f66afa6')}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/exceptions/handlers.py", line 31, in base_app_error_handler
    return JSONResponse(status_code=status_code, content=response_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 46, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 192, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UUID is not JSON serializable
2026-02-05 23:09:36 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 23:09:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:09:40 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-05 23:31:07 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 23:31:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:31:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-05 23:31:16 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-05 23:33:46 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 73, in get_visible_section_id
    theme_section = await get_visible_theme_section.execute(query)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 14, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: GetRootTheme.execute() takes 1 positional argument but 2 were given
2026-02-05 23:40:05 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 23:40:07 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:40:12 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-05 23:40:12 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 73, in get_visible_section_id
    theme_section = await get_visible_theme_section.execute(query)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: GetRootTheme.execute() takes 1 positional argument but 2 were given
2026-02-05 23:42:16 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-05 23:42:19 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-05 23:42:22 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-06 00:20:18 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:22:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:24:13 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:24:24 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:24:53 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-06 00:24:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:01 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:25:57 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:26:03 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:26:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:26:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:26:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:26:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:27:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:28:03 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:29:05 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:30:07 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:31:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:32:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:33:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:33:48 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:34:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:34:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 00:35:11 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-06 00:35:12 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-06 00:37:08 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-06 17:32:05 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-06 17:32:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-06 17:33:22 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-06 17:33:24 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-06 17:36:12 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 66, in get_task
    return await get_task.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_task.py", line 15, in execute
    message.ensure_is_task()
  File "/app/src/domain/messages/entities/message.py", line 71, in ensure_is_task
    raise # f"Message {self.id} is {self.type}, expected TASK"
    ^^^^^
RuntimeError: No active exception to reraise
2026-02-08 08:49:58 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 08:50:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:07 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:21 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:50:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:51:21 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:52:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:53:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:54:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:55:17 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:56:19 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:57:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:58:21 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 08:59:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:00:24 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:01:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:02:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:03:27 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:04:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:17 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:19 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:35 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:05:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:06:00 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:06:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:07:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:08:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:09:24 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:10:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:11:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:12:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:13:31 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:14:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:15:35 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:16:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:17:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:18:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:19:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:20:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:21:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:22:48 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:23:49 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:24:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:25:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:25:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:27:18 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:27:19 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-08 09:28:45 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/endpoints.py", line 52, in get_theme_sections_endpoint
    return schemas.ThemeSectionResponse.from_orm(theme_sections)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 1475, in from_orm
    return cls.model_validate(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ThemeSectionResponse
  Input should be a valid dictionary or object to extract fields from [type=model_attributes_type, input_value=[ThemeSectionDTO(section_...ode='chat_experiments')], input_type=list]
    For further information visit https://errors.pydantic.dev/2.12/v/model_attributes_type
2026-02-08 09:30:27 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:30:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:30:34 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:32:10 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:32:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:33:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:34:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:35:59 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:36:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:36:48 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:38:00 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-08 09:38:32 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 48, in get_root_theme
    return await get_root_theme.execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_root.py", line 13, in execute
    theme = await self.theme_repo.get_root(settings.app.system_user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 67, in get_root
    theme_row["id"]
    ~~~~~~~~~^^^^^^
TypeError: 'NoneType' object is not subscriptable
2026-02-08 09:39:01 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:39:01 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:43:20 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:43:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:43:38 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:43:39 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:46:54 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:46:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:47:02 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:47:03 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:47:53 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:47:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:47:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:47:59 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:49:38 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:49:40 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:49:48 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:49:49 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:53:01 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:53:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:53:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:53:25 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:55:27 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:55:30 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:55:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:55:33 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 09:57:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 09:57:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:59:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 09:59:50 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:01:02 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:01:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:01:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:01:10 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:06:39 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:06:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:07:04 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:07:05 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:07:59 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:08:02 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:08:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:08:21 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:13:49 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:13:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:14:03 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:14:05 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:18:03 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:18:05 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:18:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:18:11 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:23:04 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:23:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:23:08 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:23:09 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:24:31 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:24:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:24:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:24:38 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:29:07 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:29:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:29:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:29:16 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:36:34 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:36:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:36:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:36:46 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:54:54 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:54:57 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:55:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:55:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:55:36 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:55:38 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:55:44 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:55:44 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 10:59:09 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 10:59:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:59:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 10:59:24 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 11:04:41 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 11:04:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 11:04:50 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 11:04:50 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 11:05:24 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 11:05:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 11:05:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 11:05:30 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 11:05:30 - database - INFO - [connection.py:54] - üêò PostgreSQL disconnected
2026-02-08 15:19:16 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 15:19:18 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-08 15:19:42 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/themes/dependencies.py", line 48, in get_root_theme
    return await get_root_theme.execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/themes/use_cases/get_root.py", line 13, in execute
    theme = await self.theme_repo.get_root(settings.app.system_user_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/themes.py", line 57, in get_root
    section_rows = await connection.fetch(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 694, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column ts.created_at does not exist
HINT:  Perhaps you meant to reference the column "s.created_at".
2026-02-08 15:23:24 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 15:23:31 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 15:38:59 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 15:38:59 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-08 15:43:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 15:43:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 15:43:57 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 15:43:57 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 55, in get_posts_endpoint
    query = GetPostsQuery(section_id=section.id, limit=limit, offset=offset)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for GetPostsQuery
theme_id
  Field required [type=missing, input_value={'section_id': UUID('6222...imit': 100, 'offset': 0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
2026-02-08 15:45:06 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-08 15:45:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-08 15:45:13 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-08 15:45:31 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-08 15:52:09 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/sections/dependencies.py", line 30, in get_section
    return await get_section.execute(command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 19, in execute
    section = await self._get_by_id(query.params["section_id"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 30, in _get_by_id
    return await self.section_repo.get_by_id(section_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 22, in get_by_id
    return Section.from_db_with_allowed_message_types(section_row, section_message_type_rows)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/entities/section.py", line 69, in from_db_with_allowed_message_types
    section._allowed_message_types = [SectionMessageType.from_db_record(record) for record in section_message_type_records]
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/entities/section.py", line 69, in <listcomp>
    section._allowed_message_types = [SectionMessageType.from_db_record(record) for record in section_message_type_records]
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/value_objects.py", line 42, in from_db_record
    message_type=SectionAllowedMessageType(record["message_type"]),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/enum.py", line 714, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/enum.py", line 1137, in __new__
    raise ve_exc
ValueError: 'post' is not a valid SectionAllowedMessageType
2026-02-08 15:52:55 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 54, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/sections/dependencies.py", line 30, in get_section
    return await get_section.execute(command)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 19, in execute
    section = await self._get_by_id(query.params["section_id"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/sections/use_cases/get.py", line 30, in _get_by_id
    return await self.section_repo.get_by_id(section_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/sections.py", line 22, in get_by_id
    return Section.from_db_with_allowed_message_types(section_row, section_message_type_rows)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/entities/section.py", line 69, in from_db_with_allowed_message_types
    section._allowed_message_types = [SectionMessageType.from_db_record(record) for record in section_message_type_records]
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/entities/section.py", line 69, in <listcomp>
    section._allowed_message_types = [SectionMessageType.from_db_record(record) for record in section_message_type_records]
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/sections/value_objects.py", line 42, in from_db_record
    message_type=SectionAllowedMessageType(record["message_type"]),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/enum.py", line 714, in __call__
    return cls.__new__(cls, value)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/enum.py", line 1137, in __new__
    raise ve_exc
ValueError: 'post' is not a valid SectionAllowedMessageType
2026-02-09 14:51:45 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-09 14:51:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 14:56:38 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-09 14:56:43 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:20:46 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-09 17:20:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:20:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:20:59 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:02 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:05 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:17 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:27 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:21:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:22:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 17:22:23 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-09 18:24:41 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 00:13:18 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 00:20:17 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 00:20:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 00:32:19 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 00:32:20 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-12 00:34:14 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 00:34:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 00:36:51 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 00:36:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 00:37:23 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 00:37:23 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 41, in create_post_endpoint
    message_id = await create_post.execute(command)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/create_post.py", line 19, in execute
    section.ensure_allowed_message_type(SectionAllowedMessageType.POST)
  File "/app/src/domain/sections/entities/section.py", line 53, in ensure_allowed_message_type
    raise # <MessageType> –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –≤ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏
    ^^^^^
RuntimeError: No active exception to reraise
2026-02-12 02:03:34 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 02:03:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 02:27:24 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 02:27:25 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-12 02:54:00 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 02:54:02 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 02:54:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 02:58:01 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 88, in get_tasks_endpoint
    tasks = await get_tasks.execute(query)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_tasks.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 114, in get_list
    return [Message.from_db_record_with_data(row) for row in rows]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 114, in <listcomp>
    return [Message.from_db_record_with_data(row) for row in rows]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 103, in from_db_record_with_data
    message.task_data = TaskMessageData.from_dict(record["task_message_data"])
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/value_objects/message.py", line 37, in from_dict
    return cls(ratio=data["ratio"])
                     ~~~~^^^^^^^^^
TypeError: string indices must be integers, not 'str'
2026-02-12 03:08:18 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:08:20 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:08:26 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:08:26 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 88, in get_tasks_endpoint
    tasks = await get_tasks.execute(query)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_tasks.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 114, in get_list
    return [Message.from_db_record_with_data(row) for row in rows]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 114, in <listcomp>
    return [Message.from_db_record_with_data(row) for row in rows]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 103, in from_db_record_with_data
    message.task_data = TaskMessageData.from_dict(record["task_message_data"])
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/value_objects/message.py", line 37, in from_dict
    return cls(ratio=data["ratio"])
                     ~~~~^^^^^^^^^
TypeError: string indices must be integers, not 'str'
2026-02-12 03:11:14 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:11:16 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:11:24 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:14:19 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 15, in execute
    message.ensure_is_post()
  File "/app/src/domain/messages/entities/message.py", line 70, in ensure_is_post
    self._ensure_type(MessageType.POST)
  File "/app/src/domain/messages/entities/message.py", line 67, in _ensure_type
    raise MessageStateConflictError.expected_type(message_id=self.id, actual=self.type, expected=expected)
src.domain.messages.exceptions.MessageStateConflictError: Message 624ac543-4ffe-427d-a6e7-d49301485d3b is task, expected post | {'message_id': UUID('624ac543-4ffe-427d-a6e7-d49301485d3b'), 'actual_type': 'task', 'expected_type': 'post', 'reason': 'wrong_message_type'}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 118, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 21, in wrapper
    raise HTTPException(status_code=409, detail=e.to_dict())
fastapi.exceptions.HTTPException: 409: {'error': 'message_state_conflict.expected_type', 'message': 'Message 624ac543-4ffe-427d-a6e7-d49301485d3b is task, expected post', 'details': {'message_id': UUID('624ac543-4ffe-427d-a6e7-d49301485d3b'), 'actual_type': 'task', 'expected_type': 'post', 'reason': 'wrong_message_type'}, 'layer': 'domain'}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/exceptions/handlers.py", line 49, in http_exception_handler
    return JSONResponse(
           ^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 189, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 46, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/responses.py", line 192, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UUID is not JSON serializable
2026-02-12 03:16:50 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:16:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:16:56 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:17:49 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:17:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:18:28 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:22:32 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 110, in create_task_assignment_endpoint
    message_id = await create_task_assignment.execute(command)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/create_task_assignment.py", line 30, in execute
    message = Message.create_task_assignment(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 162, in create_task_assignment
    if expires_at < (now + timedelta(days=1)):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: can't compare offset-naive and offset-aware datetimes
2026-02-12 03:26:04 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:26:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:26:25 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:28:31 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 125, in get_task
    return await get_task.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_task.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.task_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 35, in get_by_id
    return Message.from_db_record_with_data(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 105, in from_db_record_with_data
    message.task_assignment_data = TaskAssignmentMessageData.from_dict(record["task_assignment_message_data"])
                                                                       ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'task_assignment_message_data'
2026-02-12 03:29:39 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:29:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:29:44 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:29:44 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 125, in get_task
    return await get_task.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_task.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.task_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 35, in get_by_id
    return Message.from_db_record_with_data(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 106, in from_db_record_with_data
    message.task_assignment_data = TaskAssignmentMessageData.from_dict(record["task_assignment_message_data"])
                                                                       ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'task_assignment_message_data'
2026-02-12 03:32:13 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:32:15 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:32:26 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:34:44 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 124, in get_task_assignments_endpoint
    task_assignments = await get_task_assignments.execute(query)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_task_assignments.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 112, in get_list
    rows = await connection.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 694, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column m.content_id does not exist
HINT:  Perhaps you meant to reference the column "cmd.content_id".
2026-02-12 03:37:55 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:37:57 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:37:59 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 03:57:37 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:57:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:59:09 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 03:59:11 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 03:59:58 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 04:02:01 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 57, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 145, in create_comment_endpoint
    message_id = await create_comment.execute(command)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/create_comment.py", line 35, in execute
    await self.message_repo.add(message)
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 49, in add
    await self._save_specific_data(connection, message)
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 74, in _save_specific_data
    await connection.execute(
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 357, in execute
    _, status, _ = await self._execute(
                   ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2033, in _do_execute
    result = await executor(stmt, None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: insert or update on table "comment_message_data" violates foreign key constraint "comment_message_data_reply_to_message_id_fkey"
DETAIL:  Key (reply_to_message_id)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "messages".
2026-02-12 05:05:53 - root - INFO - [main.py:29] - üî¥ Shutting down...
2026-02-12 05:05:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-12 11:52:07 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-12 18:07:40 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 02:52:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 04:32:36 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 15:38:37 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 15:45:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 15:53:30 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 15:53:32 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 15:53:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 15:55:20 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 15:55:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 15:55:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:08:07 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 16:08:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:08:52 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:09:53 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 16:09:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:11:33 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 16:11:34 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:11:39 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:14:12 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 16:14:14 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:14:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 16:16:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:05:03 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 23:05:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:49:49 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-13 23:49:51 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:49:53 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:49:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:49:57 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:50:01 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:50:05 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:50:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:50:19 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:50:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:51:01 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:51:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:52:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:53:57 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:54:06 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-13 23:55:11 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-13 23:55:12 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-13 23:55:52 - root - ERROR - [upload_files.py:48] - Failed to upload file img (5).jpg: invalid input for query argument $8: {} (expected str, got dict)
2026-02-13 23:55:52 - root - WARNING - [upload_files.py:52] - Some files failed: [{'filename': 'img (5).jpg', 'error': 'invalid input for query argument $8: {} (expected str, got dict)'}]
2026-02-14 00:03:56 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 00:03:58 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 00:04:12 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 00:04:12 - root - ERROR - [upload_files.py:48] - Failed to upload file img (5).jpg: invalid input for query argument $8: {} (expected str, got dict)
2026-02-14 00:04:12 - root - WARNING - [upload_files.py:52] - Some files failed: [{'filename': 'img (5).jpg', 'error': 'invalid input for query argument $8: {} (expected str, got dict)'}]
2026-02-14 00:06:40 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 00:06:42 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 00:06:54 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 00:07:33 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 00:07:35 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 00:08:07 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 00:08:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 00:08:29 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 00:08:29 - root - ERROR - [upload_files.py:48] - Failed to upload file img (5).jpg: invalid input for query argument $8: {} (expected str, got dict)
2026-02-14 00:08:29 - root - WARNING - [upload_files.py:52] - Some files failed: [{'filename': 'img (5).jpg', 'error': 'invalid input for query argument $8: {} (expected str, got dict)'}]
2026-02-14 00:08:53 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 00:08:55 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 00:09:26 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 03:20:18 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 03:20:21 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 03:21:12 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 03:21:12 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 36, in get_create_post
    return CreatePost(message_repo, section_repo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: CreatePost.__init__() missing 1 required positional argument: 'media_file_repo'
2026-02-14 03:22:32 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 03:22:34 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 03:23:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 03:23:37 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 124, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 36, in get_by_id
    return Message.from_db_record_with_data_and_media(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in from_db_record_with_data_and_media
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]]
                                                                                  ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'message_media_files'
2026-02-14 03:24:26 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 03:24:28 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 03:24:30 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 03:24:30 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 124, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 37, in get_by_id
    return Message.from_db_record_with_data_and_media(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in from_db_record_with_data_and_media
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]]
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2026-02-14 03:26:20 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 03:26:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 03:26:25 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:24:39 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:24:41 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:25:47 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:26:05 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 39, in get_create_post
    return CreatePost(message_repo, section_repo, media_file_repo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: CreatePost.__init__() missing 1 required positional argument: 'storage_service'
2026-02-14 04:27:20 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:27:21 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:27:34 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:27:55 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 37, in get_by_id
    return Message.from_db_record_with_data_and_media(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in from_db_record_with_data_and_media
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]] if record.get("message_media_files") else []
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in <listcomp>
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]] if record.get("message_media_files") else []
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/value_objects/message_media_file.py", line 21, in from_db_record
    media_file_id=record["media_file_id"],
                  ~~~~~~^^^^^^^^^^^^^^^^^
TypeError: 'asyncpg.pgproto.pgproto.UUID' object is not subscriptable
2026-02-14 04:29:20 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:29:22 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:29:23 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:29:23 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 37, in get_by_id
    return Message.from_db_record_with_data_and_media(row)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in from_db_record_with_data_and_media
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]] if record.get("message_media_files") else []
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/entities/message.py", line 146, in <listcomp>
    message._media_files = [MessageMediaFile.from_db_record(record) for record in record["message_media_files"]] if record.get("message_media_files") else []
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/domain/messages/value_objects/message_media_file.py", line 22, in from_db_record
    media_file_id=record["media_file_id"],
                  ~~~~~~^^^^^^^^^^^^^^^^^
TypeError: 'asyncpg.pgproto.pgproto.UUID' object is not subscriptable
2026-02-14 04:35:23 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:35:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:36:23 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:36:25 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:36:30 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:36:30 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 35, in get_by_id
    row = await connection.fetchrow(query, message_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 752, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "m.author_id" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 04:37:24 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:37:26 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:37:31 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:37:32 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 35, in get_by_id
    row = await connection.fetchrow(query, message_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 752, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "m.author_id" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 04:38:25 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:38:27 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:38:31 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:38:31 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 36, in get_by_id
    row = await connection.fetchrow(query, message_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 752, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "pmd.*" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 04:40:03 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:40:05 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:40:21 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:40:21 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 345, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/dependencies/utils.py", line 643, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/dependencies.py", line 126, in get_post
    return await get_post.execute(query)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_post.py", line 13, in execute
    message = await self.message_repo.get_by_id(query.post_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 36, in get_by_id
    row = await connection.fetchrow(query, message_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 752, in fetchrow
    data = await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "m.theme_id" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 04:49:15 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:49:18 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:49:21 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 04:49:21 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 61, in get_post_endpoint
    return schemas.PostMessageResponse.from_orm(post)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 1475, in from_orm
    return cls.model_validate(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/pydantic/main.py", line 716, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for PostMessageResponse
media_files.0
  Input should be a valid dictionary or instance of MessageMediaFileRepsonse [type=model_type, input_value=MessageMediaFileDTO(media...c0a3bd0'), sort_order=1), input_type=MessageMediaFileDTO]
    For further information visit https://errors.pydantic.dev/2.12/v/model_type
2026-02-14 04:58:52 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 04:58:54 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 04:58:58 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 05:14:25 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 20:32:56 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 21:12:15 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 21:12:16 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-14 21:13:32 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 40, in create_post_endpoint
    message_id = await create_post.execute(command)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/create_post.py", line 42, in execute
    mf.ensure_is_temp()
  File "/app/src/domain/media_files/entities.py", line 46, in ensure_is_temp
    raise ValueError(f"Media {self.id} is not temporary")
ValueError: Media 872b8127-daaa-4859-ac90-4dde7c0a3bd0 is not temporary
2026-02-14 21:21:44 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 21:21:47 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 21:21:53 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 21:25:26 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 53, in get_posts_endpoint
    posts = await get_posts.execute(query)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_posts.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 163, in get_list
    rows = await connection.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 694, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "pmd.*" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 21:26:34 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 21:26:36 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 21:26:40 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-14 21:26:40 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 53, in get_posts_endpoint
    posts = await get_posts.execute(query)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_posts.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 168, in get_list
    rows = await connection.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 694, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "pmd.*" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 21:26:45 - root - ERROR - [handlers.py:58] - Unhandled exception
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 85, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/main.py", line 53, in trace_id_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/api/v1/messages/endpoints.py", line 53, in get_posts_endpoint
    posts = await get_posts.execute(query)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/decorators.py", line 15, in wrapper
    return await func(*args, **kwargs) # pyright: ignore
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/application/messages/use_cases/get_posts.py", line 16, in execute
    messages = await self.message_repo.get_list(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/src/infrastructure/database/repositories/raw_sql/messages.py", line 168, in get_list
    rows = await connection.fetch(query, *params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 694, in fetch
    return await self._execute(
           ^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1873, in _execute
    result, _ = await self.__execute(
                ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 1970, in __execute
    result, stmt = await self._do_execute(
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 2013, in _do_execute
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/asyncpg/connection.py", line 443, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.GroupingError: column "pmd.*" must appear in the GROUP BY clause or be used in an aggregate function
2026-02-14 21:27:42 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-14 21:27:45 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-14 21:27:52 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 00:40:07 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 00:40:12 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 00:44:19 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 00:44:20 - httpx - INFO - [_client.py:1740] - HTTP Request: GET https://t.me/i/userpic/320/AVZ0c2YDg7JkFugk1v1C5Os0TQ8ui19GB3XWxRdUOWU.svg "HTTP/1.1 200 OK"
2026-02-20 00:47:35 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 00:47:38 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 00:47:46 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 00:57:27 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 00:57:30 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 01:00:34 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 02:11:30 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 02:11:33 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 02:11:42 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 02:26:09 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 02:26:10 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 02:27:21 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 02:31:44 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 02:31:46 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 02:32:06 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 02:34:27 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 02:34:29 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
2026-02-20 02:34:53 - database - INFO - [connection.py:48] - üêò Postgresql connected
2026-02-20 06:39:00 - root - INFO - [main.py:25] - üî¥ Shutting down...
2026-02-20 06:39:09 - infrastructure.logger - INFO - [__init__.py:31] - üöÄ Logger initialized successfully
